(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(14),c=t.n(r),l=(t(20),t(4)),u=t(2),i=t(3),m=t.n(i),s="/api/persons",d=function(){return m.a.get(s)},f=function(e){return m.a.post(s,e)},h=function(e){return m.a.delete("".concat(s,"/").concat(e))},b=function(e,n){return m.a.put("".concat(s,"/").concat(e),n)},p=function(e){return a.a.createElement("div",null,"filter shown with: ",a.a.createElement("input",{value:e.newFilter,onChange:e.handleFilter}))},g=function(e){return a.a.createElement("form",{onSubmit:e.addName},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},v=function(e){return a.a.createElement("div",null,e.dataToShow.map((function(n){return a.a.createElement("p",{key:n.id},n.name," ",n.number," ",a.a.createElement("button",{onClick:function(){return e.deletePerson(n.id,n.name)}},"delete"))})))},w=function(e){var n=e.notification;return null===n?null:a.a.createElement("div",null,a.a.createElement("div",{className:"notification"},n))},E=function(e){var n=e.errorNotification;return null===n?null:a.a.createElement("div",null,a.a.createElement("div",{className:"errorNotification"},n))},N=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),i=Object(u.a)(c,2),m=i[0],s=i[1],N=Object(o.useState)(""),j=Object(u.a)(N,2),O=j[0],k=j[1],C=Object(o.useState)(""),S=Object(u.a)(C,2),T=S[0],y=S[1],x=Object(o.useState)(null),F=Object(u.a)(x,2),P=F[0],B=F[1],D=Object(o.useState)(null),J=Object(u.a)(D,2),L=J[0],W=J[1];Object(o.useEffect)((function(){d().then((function(e){r(e.data)}))}),[]),console.log("render",t.length,"persons");var I=function(e){var n=t.find((function(n){return n.id===e})),o=Object(l.a)(Object(l.a)({},n),{},{number:O});b(e,o).then((function(n){r(t.map((function(t){return t.id!==e?t:n.data})))})).catch((function(e){console.log("the person '".concat(n.name,"' no longer exists in the phonebook")),W("the person '".concat(n.name,"' no longer exists in the phonebook")),setTimeout((function(){W(null)}),3e3)}),r(t.filter((function(n){return n.id!==e})))),console.log("".concat(n.name,"'s number was changed to the phonebook")),B("".concat(n.name,"'s number was changed to the phonebook")),setTimeout((function(){B(null)}),3e3)},M=t.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())}));return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(w,{notification:P}),a.a.createElement(E,{errorNotification:L}),a.a.createElement(p,{newFilter:T,handleFilter:function(e){console.log(e.target.value),y(e.target.value)}}),a.a.createElement("h2",null,"add a new number"),a.a.createElement(g,{addName:function(e){e.preventDefault();var n={name:m,number:O},o=t.find((function(e){return e.name===m}));o?window.confirm("".concat(m," already exists in the phonebook, replace the old number with a new one?"))?I(o.id):console.log("number not updated"):f(n).then((function(e){r(t.concat(e.data)),s(""),k(""),B("Person '".concat(m,"' was added to the phonebook")),setTimeout((function(){B(null)}),3e3)})).catch((function(e){console.log(e.response.data),W(e.response.data.error),setTimeout((function(){W(null)}),3e3)}))},newName:m,newNumber:O,handleNameChange:function(e){console.log(e.target.value),s(e.target.value)},handleNumberChange:function(e){console.log(e.target.value),k(e.target.value)}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(v,{dataToShow:M,deletePerson:function(e,n){window.confirm("Delete ".concat(n,"?"))?(h(e),B("The person '".concat(n,"' was deleted from the phonebook")),r(t.filter((function(n){return n.id!==e}))),console.log("person deleted"),setTimeout((function(){B(null)}),3e3)):console.log("delete not confirmed")}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.e94b8964.chunk.js.map